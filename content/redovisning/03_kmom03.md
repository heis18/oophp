---
---
Redovisning kmom03
=========================

Jag har ingen tidigare erfarenhet av att skriva kod som testar annan kod, detta var en helt ny upplevelse för mig. Jag har hör begreppet enhetstestning tidigare, men inte funderat så mycket på det, inte heller tidigare i mitt liv faktiskt tänk på att jag skulle börja hantera den typen av arbeten.

Jag upplever begreppen enhetstestning och “att skriva testbar kod” som intressant. Det finns så mycket olika delar av det och så mycket filosofi, inte bara att testa att någonting fungerar utan alla ”hur, vad” och kanske ”varför” som följer med. Bitvis känns det även som en väldigt god tanke, ibland till och med en utopi, att kunna skriva tester som testar all kod. Det jag känner mycket nu i början, kan förhoppningsvis handla om bristen på erfarenhet, är att det tar nära på dubbelt så lång tid att koda, då man i princip skriver all kod två gånger. Ibland känns det lite som att man skrev vissa funktioner för att kunna göra bra testar, och att de funktionerna kanske inte skrivits på det sättet annars. Men överlag upplever jag att skriva testkod som något väldigt positivt, man får snabbt och lätt svar på om en funktion gör det man tänkt sig eller ej, ett praktiskt systematiskt avbockande om koden fungerar.

White-box testning handlar om att man testar koden när man vet exakt vad som finns i den, man har full insyn i alla delar och kan således testa alla delar av koden. Man designar testfall utifrån hur koden ser ut, eller ännu bättre designar testfall utifrån vad man vill att koden ska utföra och skriver sedan koden utifrån det fungerande testfallen. Motsatsen till detta är black-box testning som i huvudsak är funktionstester, till skillnad mot white-box testerna som inriktas mot enheter/enhetstestning, då man i en black-box test inte har tillgång till koden. Man vill i dessa test se att funktionerna man vill ha fungerar, utan att kunna fördjupa sig i hur koden som skapat dem ser ut. Sedan finns det ett mellanting mellan dessa båda som kallas grey-box testning, en kombination av de andra två, där en grey-box testare har tillgång till viss kod och dokumentation, men inte i så hög grad som den som testar genom white-box metoden.

Jag startade nog hela uppgiften med viss naivitet att det såg ut som ett relativt simpelt spel och att stora delar nog fanns färdigt i de övningar och uppgifter vi skapat innan, men insåg snabbt hur mycket mer komplext hela arbetet var. Jag började med att skissa och anteckna en hel del på papper hur jag tänkte mig att spelet skulle fungera, vilka olika klasser och funktioner jag behövde och hur dessa skulle samverka med varandra. Jag satte även ganska tidigt upp webbsidan så jag fick den visuella bilden klar för mig hur jag ville att alla delar skulle fungera ihop med varandra och vilka funktioner som kunde behövas till vad. Jag insåg även efter ett tag att jag nog la ambitionsnivån ganska högt, då jag bestämde mig för att jag ville ha de gamla resultaten utritade i en tabell så man kunde som spelare följa spelets olika omgångar genom hela spelet, vilket innebar ett antal extra funktioner för att spara resultaten. Jag har genom arbetets gång huvudsakligen arbetat med fyra klasser, en för tärningen, en för handen med tärningar, en för spelfunktionerna och en för spelbrädet och spelarna. Sedan blev det efter hand två små klasser till för den grafiska delen, då jag valde att jag ville ha en tärning utritad, som vi gjorde i övningen, och inte bara numren utskrivna. Jag har satt upp funktionerna för när datorn slår till att om datorn vid första slaget inte kommit upp i en viss summa på tärningarna slår den automatiskt en gång till, förutsatt då att den inte slagit en etta. Jag grubblade en hel del på hur jag skulle hantera datorns slag och kände att detta nog kunde bli en ganska bra och rättvis lösning. Jag har försökt hålla en balans mellan att ha ett tydligt, tilltalande och användarvänligt gränssnitt på sidan som ritar ut spelet en bra organiserad kod som är lätt att arbeta med. Dock kan jag verkligen konstatera att det blev många fler funktioner till slut än vad jag hade skissat på i början. Mitt UML-diagram har jag varit inne och ändrat i ett flertal gånger.

Jag började väldigt ambitiöst med mitt spel, och skrev ner de funktionerna som jag tänkt mig att jag skulle ha med och skrev tester för dem direkt/under tiden jag skapade funktionerna. Dock växte koden ganska mycket efter hand, så den kod jag skrev i början är betydlig mer testad än den senare. Framåt slutet kändes det som att ambitionsnivån att testa all kod, landade i att jag bara ville få spelet färdigt och väl fungerande. Jag har sammanlagt skapat 22 tester, 43 assertions på mina klasser. Jag har inte skapat några tester till två av mina klasser, de som tar hand om grafiken till tärningarna, kände att tiden fick fokuseras på de andra fyra huvudklasserna.

Jag gillar papper och penna, ingen direkt ny TIL, men en påminnelse jag får om och om igen. När spelets struktur skulle sättas upp, är det skissblock och penna som gäller för mig för att få ordning på mina tankar och för att börja hitta de system jag känner att jag kan arbeta med. 
